/*	Filename:	MoveItApp.as		Purpose:	This is the application-level class for Move It!  It controls things like game over states				and restarts					Author:		Justin Bachorik		Date:		3/19/09	*/package {		import flash.display.MovieClip;	import flash.text.*;	import flash.events.*;	import caurina.transitions.Tweener;			public class MoveItApp extends MovieClip {				// constants				// instance variables		var myMoveIt:MoveIt;		var myTextField:TextField;		var myTextFormat:TextFormat;		var myRestartButton:TextField;		var myRestartFormat:TextFormat;						// constructor		public function MoveItApp():void {						myMoveIt = new MoveIt();			this.addChild(myMoveIt);			//myMoveIt.init('http://localhost/~justinbachorik/moveit/xml/getLevel.php?id=1');			myMoveIt.init('xml/getLevel.php?id=2');			// set up textfield and restart button			setUpTextField();			setUpRestartButton();						this.stage.stageFocusRect = false;					} // end constructor				// handler for game over condition		public function gameOver():void {			myTextField.text = 'Game Over!';			myTextField.setTextFormat(myTextFormat);			Tweener.addTween(myMoveIt, {alpha: 0, time: 1, onComplete: gameOverHandler});					} // end gameOver				// callback to handle gameOver animations		private function gameOverHandler() {						this.removeChild(myMoveIt);						myMoveIt = null;						this.addChild(myTextField);			this.addChild(myRestartButton);						myTextField.alpha = 0;			myRestartButton.alpha = 0;			Tweener.addTween(myTextField, {alpha: 1, time: 1} );			Tweener.addTween(myRestartButton, {alpha: 1, time: 1} );					} // end gameOverHandler						// function for handling win		public function youWin() {			myTextField.text = 'Nice Work!';			myTextField.setTextFormat(myTextFormat);			Tweener.addTween(myMoveIt, {alpha: 0, time: 1, onComplete: youWinHandler});		} // end youWin				// callback to handle youWin animations		private function youWinHandler() {						this.removeChild(myMoveIt);						myMoveIt = null;						this.addChild(myTextField);			this.addChild(myRestartButton);						myTextField.alpha = 0;			myRestartButton.alpha = 0;			Tweener.addTween(myTextField, {alpha: 1, time: 1} );			Tweener.addTween(myRestartButton, {alpha: 1, time: 1} );					} // end youWinHandler				private function setUpTextField():void {			myTextField = new TextField;			myTextFormat = new TextFormat;			myTextField.autoSize = TextFieldAutoSize.LEFT;			myTextField.x = 150;			myTextField.y = 100;						myTextFormat.font = 'Tahoma';			myTextFormat.size = 40;			myTextField.setTextFormat(myTextFormat);					}	// end setUpTextField				private function setUpRestartButton():void {			myRestartButton = new TextField;			myRestartButton.text = 'Click to retry';			myRestartButton.x = 175;			myRestartButton.y = 200;			myRestartButton.autoSize = TextFieldAutoSize.LEFT;						myRestartFormat = new TextFormat;			myRestartFormat.font = 'Tahoma';			myRestartFormat.size = 20;			myRestartButton.setTextFormat(myRestartFormat);						myRestartButton.addEventListener(MouseEvent.CLICK, restart);					}	// end setUpRestartButton						// restart function		private function restart(e:MouseEvent):void {						Tweener.addTween(myTextField, {alpha: 0, time: 1, onComplete: setUpNewGame} );			Tweener.addTween(myRestartButton, {alpha: 0, time: 1} );								}	// end restart				// function to set up a new game		private function setUpNewGame():void {			this.removeChild(myTextField);			this.removeChild(myRestartButton);			myMoveIt = new MoveIt();			this.addChild(myMoveIt);			myMoveIt.init('http://localhost/~justinbachorik/moveit/xml/getLevel.php?id=1');			stage.focus = myMoveIt;					} // end setUpNewGame					} // end class MoveItApp	} // end package